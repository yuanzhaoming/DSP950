**********************************************************************************************
2016-10-28:
	在shell.h中将FINSH_PROMPT修改为#作为提示符

int rename(const char *old, const char *new) 在dfs_posix.c中定义注释掉了

硬件关系:
	SPI1---
	SPI2---
	SPI3---

//指令构造
/*
31	30  |29	28	27	26|	25	24	23	22	21|	20	19	18	17	16|	15	14	13	12	11	10	09	08|	07	06	05	04	03	02	01	00
命令类型|	命令组别  |	    组内序号      |	     第一参数     |	          第二参数            |	          第三参数

	2		4				5					5							8								 8
*/

命令类型:
	00：设置类
	01：查询类
	10：应答类
	11：错误类

命令组别:
	1~13，分别代表第三部分中划分的13个组。	
   	参数类别		描述   							   参数个数		对应分组
	1			通用参数类								7			第1组
	2			输入接口的参数类（X1-X7，共7组）		9			第2-8组
	3			输出接口的参数类（Y1-Y4，共4组）		12			第9-12组
	4			辅助参数类								16			第13组
	5			声场处理参数类							19			第14组
	 	


组内序号:
	1~31，分别代表该命令在组内的序号，与所对应的参数类型在其组内的序号一致。 	

第一参数:  	

第二参数:	

第三参数:	

**********************************************************************************************
1.2016-11-04,根据相应的板子，sram为48kB，需要修改board.h文件中的STM32_SRAM_SIZE为48.
2.2016-11-07,添加指令reboot,主要相关函数是在core_cm3.h文件中.

3.2016-11-08
	a.需要注意添加启动次数等参数。以方便后续纠察设备。
	b.做好本身程序的后备升级区，方便升级。可以通过网络的方式来升级。

Flash数据存储位置:
基本的配置信息数据位置:



-----------------------------------2016-11-09-----------------------------------------------------
W25Q16为2MB的Flash芯片。

范围为:0x0-----0x200000.



------------------------------
|    0x0000----0x1000		 |      -----------------checksum
------------------------------
|	 0x1000----	x    		 |	    -----------------data
------------------------------
|	 						 |
------------------------------
|		...					 |
------------------------------
|		...					 |
------------------------------
|		...					 |
------------------------------
|	0x10000					 |		-----------------音量，输入模式等
------------------------------
|	...						 |
------------------------------
|	...						 |
------------------------------
|	...						 |
------------------------------
|	0x20000					 |	    -----------------dsp程序代码
------------------------------
|	...						 |
------------------------------
|	...						 |
------------------------------
|	0x60000					 |	    -----------------重启次数
------------------------------
|							 |
------------------------------
|							 |
------------------------------


***************分区******************************
0x0-----0x10000:存储DSP相应的配置信息。


*********************************************

**********************************************
Flash存储逻辑:

FLASH ID:0xEF4015   Device id:0x14
1.********************************************
程序上，判断定义的内存是否超过4K,直接宏定义定义error之类的
#if (SPI_CODE_SIZE > 4*1024)
	#error "larger than 4k ..."	
#endif

2.********************************************
分布：第一个bank，共64K用来存储	 也就是 0x0---0x10000片区

#define SPI_CODE_BASE_ADDR 	(0x000000)

第一个片区:	(SPI_CODE_BASE_ADDR)
校验和:
数据(占1个sector,2个sector不等):(SPI_CODE_BASE_ADDR + 0x1000)

**为了方便操作，将校验和占据一个sector.
**其余的就是数据区




第二个片区: (SPI_CODE_BASE_ADDR + 0x1000 * (SECTOR_NUMBER + 1))
校验和:
数据(占1个sector,2个sector不等):(0x1000 * (SECTOR_NUMBER + 1) + 0X1000 + SPI_CODE_BASE_ADDR)

**为了方便操作，将校验和占据一个sector.
**其余的就是数据区



//需要注意的是  音量数据  和 输入选择  作为两个独立的选项。	mute作为stm32和dsp通信的通道。
这两个内容，就可以存储在一个组合。每隔个1s,存储一次。
#define VOLUME_INPUT_BASE_ADDR  ( 0x10000 )



//2016-11-10.
//tftp程序烧写位置
#define TFTP_ADDR  		( 0x20000 )
#define TFTP_DATA_ADDR  ( 0x20000 + 0x1000 )	(135168)

下载程序注意内容:
a.需要屏蔽一个stm32与DSP发送接收数据的线程.
b.使用tftp_get()代码.
c.使用tftp_send_dsp()发送代码给DSP.




大约有100多K的空间，因此留下 64KB * 4 	比较充足


//2016-11-11
1.在flash中存储开机启动次数。 #define REBOOT_TIMES  (0x60000)
2.

-------------------------------------------Flash 日志区----------------------------------
1.flash写的次数

	

2.关机重启的次数   
	该项只需要开机执行即可。




/*****************************************想到的一些需要研究的问题***********************************/
1.stm32的jtag用途有哪些。
2.变量存储。 全局变量，int 的存储，与定义了const的存储。







lwip参考手册:
1.http://wenku.baidu.com/view/016743bf89eb172ded63b7c3.html
2.http://wenku.baidu.com/link?url=VZz8QCBhEvA73kAGmTuJSspb3iV9MJ1ovpiIs_XIEjS0iLBAW848HrVOos0t9Pu9qBUb29lw15JtT4hXa7s7aGAi4gMED5lLqrhkzeYWBW_
3.




/************************************2017-03-07********************************/
须知：
1.根据DSP950外壳设计，输入类型按照顺序为: AES,SPDIF,COAX,DVD,AD,MIC.
2.使用tftp,主机的ip需要设置为:192.168.25.10.
3.

